{"version":3,"sources":["PrototipoWeb/js/mostrarbanco.js"],"names":["firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","firebase","initializeApp","database","banco","ref","element","document","querySelector","clickDocumento","tiempo","email","actualizar","localStorage","getItem","hoursInt","parseInt","referenciaUsuarios","once","snap","usuariosBdT","horasActuales","val","i","correo","spshot","horas","horasActualesInt","toString","update","window","location","href","snapshot","ofertas","console","log","numberId","contenedor","createElement","classList","add","cardHorizontal","oferta","setAttribute","title","textContent","appendChild","description","contacto","doc","url","addEventListener","hours"],"mappings":";AAAA,IAAIA,EAAiB,CACjBC,OAAQ,0CACRC,WAAY,sCACZC,YAAa,6CACbC,UAAW,sBACXC,cAAe,kCACfC,kBAAmB,eACnBC,MAAO,4CACPC,cAAe,gBAGnBC,SAASC,cAAcV,GACvB,IAAMW,EAAWF,SAASE,WAC1BC,MAAQD,EAASE,IAAjB,cAEA,IAAMC,EAAUC,SAASC,cAAc,aA+CvC,SAASC,EAAeC,GAChBC,IAIAC,EAJAD,EAAQE,aAAaC,QAAQ,SAC7BC,EAAWC,SAASN,EAAQ,IAEhCO,mBAAqBd,EAASE,IAA9B,eAGAY,mBAAmBC,KAAK,QAAS,SAACC,GACxBC,IAOFC,EAPED,EAAcD,EAAKG,MAEpB,IAAA,IAAMC,KAAKH,EACRA,EAAYG,GAAGC,SAAWb,IAC1BC,EAAaT,EAASE,IAAmBkB,eAAAA,OAAAA,KAIjDX,EAAWM,KAAK,QAAS,SAACO,GACtBJ,EAAgBI,EAAOH,MAAMI,MAC7BC,iBAAmBX,SAASK,EAAe,IAC3CM,kBAAoBZ,EACpBM,EAAgBM,iBAAiBC,SAAS,IAE1ChB,EAAWiB,OAAO,CACdH,MAAOL,IAEXS,OAAOC,SAASC,KAAO,yBAtEnC5B,MAAMc,KAAK,QAAS,SAACe,GACXC,IAAAA,EAAUD,EAASX,MACzBa,QAAQC,IAAIF,GAERG,IAAAA,EAAW,EACV,IAAA,IAAMd,KAAKW,EAAS,CACfI,IAAAA,EAAa/B,SAASgC,cAAc,OAC1CD,EAAWE,UAAUC,IAAI,MAAO,MAAO,MAEjCC,IAAAA,EAAiBnC,SAASgC,cAAc,OAC9CG,EAAeF,UAAUC,IAAI,OAAQ,cAE/BE,IAAAA,EAASpC,SAASgC,cAAc,OACtCI,EAAOH,UAAUC,IAAI,gBACrBE,EAAOC,aAAa,KAAaP,OAAAA,OAAAA,IAE3BQ,IAAAA,EAAQtC,SAASgC,cAAc,OACrCM,EAAML,UAAUC,IAAI,SACpBI,EAAMC,YAAyBZ,WAAAA,OAAAA,EAAQX,GAAGsB,OAC1CF,EAAOI,YAAYF,GAEbG,IAAAA,EAAczC,SAASgC,cAAc,OAC3CS,EAAYR,UAAUC,IAAI,eAC1BO,EAAYF,YAAiBZ,GAAAA,OAAAA,EAAQX,GAAGyB,aACxCL,EAAOI,YAAYC,GAEbC,IAAAA,EAAW1C,SAASgC,cAAc,OACxCU,EAAST,UAAUC,IAAI,YACvBQ,EAASH,YAA2BZ,aAAAA,OAAAA,EAAQX,GAAGZ,OAC/CgC,EAAOI,YAAYE,GAEbC,IAAAA,EAAM3C,SAASgC,cAAc,KACnCW,EAAIV,UAAUC,IAAI,OAClBS,EAAIN,aAAa,OAAWV,GAAAA,OAAAA,EAAQX,GAAG4B,MACvCD,EAAIJ,YAAc,uBAClBI,EAAIE,iBAAiB,QAAS3C,EAAeyB,EAAQX,GAAG8B,QACxDV,EAAOI,YAAYG,GAEnBR,EAAeK,YAAYJ,GAC3BL,EAAWS,YAAYL,GACvBpC,EAAQyC,YAAYT,GACpBD","file":"mostrarbanco.a39a0603.js","sourceRoot":"..","sourcesContent":["var firebaseConfig = {\n    apiKey: \"AIzaSyAYC2xOKqPvMKbQWxXxiQHpW3HbbDdCou0\",\n    authDomain: \"introfirebase-e7ca2.firebaseapp.com\",\n    databaseURL: \"https://introfirebase-e7ca2.firebaseio.com\",\n    projectId: \"introfirebase-e7ca2\",\n    storageBucket: \"introfirebase-e7ca2.appspot.com\",\n    messagingSenderId: \"660691288615\",\n    appId: \"1:660691288615:web:3c97023e6eeab131560402\",\n    measurementId: \"G-S3377XEK4R\",\n};\n// Initialize Firebase\nfirebase.initializeApp(firebaseConfig);\nconst database = firebase.database();\nbanco = database.ref(`ofertasBdT`);\n\nconst element = document.querySelector(\".elements\");\n\nbanco.once(\"value\", (snapshot) => {\n    const ofertas = snapshot.val();\n    console.log(ofertas);\n\n    let numberId = 1;\n    for (const i in ofertas) {\n        const contenedor = document.createElement(\"div\");\n        contenedor.classList.add(\"col\", \"s12\", \"l6\");\n\n        const cardHorizontal = document.createElement(\"div\");\n        cardHorizontal.classList.add(\"card\", \"horizontal\");\n\n        const oferta = document.createElement(\"div\");\n        oferta.classList.add(\"card-stacked\");\n        oferta.setAttribute(\"id\", `elem${numberId}`);\n\n        const title = document.createElement(\"div\");\n        title.classList.add(\"title\");\n        title.textContent = `TÃ­tulo: ${ofertas[i].title}`;\n        oferta.appendChild(title);\n\n        const description = document.createElement(\"div\");\n        description.classList.add(\"description\");\n        description.textContent = `${ofertas[i].description}`;\n        oferta.appendChild(description);\n\n        const contacto = document.createElement(\"div\");\n        contacto.classList.add(\"contacto\");\n        contacto.textContent = `Contacto: ${ofertas[i].email}`;\n        oferta.appendChild(contacto);\n\n        const doc = document.createElement(\"a\");\n        doc.classList.add(\"btn\");\n        doc.setAttribute(\"href\", `${ofertas[i].url}`);\n        doc.textContent = \"Acceder al documento\";\n        doc.addEventListener(\"click\", clickDocumento(ofertas[i].hours));\n        oferta.appendChild(doc);\n\n        cardHorizontal.appendChild(oferta);\n        contenedor.appendChild(cardHorizontal);\n        element.appendChild(contenedor);\n        numberId++;\n    }\n});\n\nfunction clickDocumento(tiempo) {\n    let email = localStorage.getItem(\"email\");\n    let hoursInt = parseInt(tiempo, 10); // pasar a entero en base 10\n\n    referenciaUsuarios = database.ref(`usuariosBdT`);\n    let actualizar;\n\n    referenciaUsuarios.once(\"value\", (snap) => {\n        const usuariosBdT = snap.val();\n\n        for (const i in usuariosBdT) {\n            if (usuariosBdT[i].correo === email) {\n                actualizar = database.ref(`usuariosBdT/${i}`);\n            }\n        }\n        let horasActuales;\n        actualizar.once(\"value\", (spshot) => {\n            horasActuales = spshot.val().horas;\n            horasActualesInt = parseInt(horasActuales, 10);\n            horasActualesInt -= hoursInt;\n            horasActuales = horasActualesInt.toString(10);\n\n            actualizar.update({\n                horas: horasActuales,\n            });\n            window.location.href = \"bancodetiempo.html\";\n        });\n    });\n}\n"]}