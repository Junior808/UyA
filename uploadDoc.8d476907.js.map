{"version":3,"sources":["PrototipoWeb/js/uploadDoc.js"],"names":["firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","firebase","initializeApp","selectedFile","database","uploadFile","filename","name","uploadTask","storage","ref","put","on","snapshot","progress","bytesTransferred","totalBytes","console","log","state","TaskState","PAUSED","RUNNING","error","getDownloadURL","then","downloadURL","$","event","target","files","btnUploadDoc","document","querySelector","onclick","url","email","localStorage","getItem","alert","window","location","href","title","getElementById","value","hours","description","banco","push","set"],"mappings":";AAAA,IAAIA,EAAiB,CACjBC,OAAQ,0CACRC,WAAY,sCACZC,YAAa,6CACbC,UAAW,sBACXC,cAAe,kCACfC,kBAAmB,eACnBC,MAAO,4CACPC,cAAe,gBAGnBC,SAASC,cAAcV,GACvB,IACIW,EADEC,EAAWH,SAASG,WAO1B,SAASC,IAEDC,IAAAA,EAAWH,EAAaI,KAGxBC,EAFaP,SAASQ,UAAUC,IAAI,gBAAkBJ,GAE9BK,IAAIR,GAIhCK,EAAWI,GACP,gBACA,SAASC,GAGDC,IAAAA,EACCD,EAASE,iBAAmBF,EAASG,WAAc,IAEhDH,OADRI,QAAQC,IAAI,aAAeJ,EAAW,UAC9BD,EAASM,OACRlB,KAAAA,SAASQ,QAAQW,UAAUC,OAC5BJ,QAAQC,IAAI,oBACZ,MACCjB,KAAAA,SAASQ,QAAQW,UAAUE,QAC5BL,QAAQC,IAAI,uBAIxB,SAASK,KAGT,WAGIf,EAAWK,SAASH,IACfc,iBACAC,KAAK,SAASC,QAtC/BC,EAAE,SAASf,GAAG,SAAU,SAASgB,GAC7BzB,EAAeyB,EAAMC,OAAOC,MAAM,KA8CtC,IAAMC,EAAeC,SAASC,cAAc,iBAC5CF,EAAaG,QAAU,WAIf5B,IAAAA,EAAWH,EAAaI,KAGxBC,EAFaP,SAASQ,UAAUC,IAAI,gBAAkBJ,GAE9BK,IAAIR,GAIhCK,EAAWI,GACP,gBACA,SAASC,GAGDC,IAAAA,EACCD,EAASE,iBAAmBF,EAASG,WAAc,IAEhDH,OADRI,QAAQC,IAAI,aAAeJ,EAAW,UAC9BD,EAASM,OACRlB,KAAAA,SAASQ,QAAQW,UAAUC,OAC5BJ,QAAQC,IAAI,oBACZ,MACCjB,KAAAA,SAASQ,QAAQW,UAAUE,QAC5BL,QAAQC,IAAI,uBAIxB,SAASK,KAGT,WAGIf,EAAWK,SAASH,IACfc,iBACAC,KAAK,SAASC,GACPS,IAAAA,EAAMT,EACVT,QAAQC,IAAI,MAAOiB,GAIfC,IAAAA,EAAQC,aAAaC,QAAQ,SAE5BF,GADLnB,QAAQC,IAAIkB,GACG,MAAVA,GAA6B,OAAVA,EACpBG,MAAM,8DACNC,OAAOC,SAASC,KAAO,iBACpB,CAECC,IAAAA,EAAQX,SAASY,eAAe,aAAaC,MAC7CC,EAAQd,SAASY,eAAe,SAASC,MACzCE,EAAcf,SAASY,eAAe,aACrCC,MAELG,MAAQ5C,EAASM,IAAjB,cAEAsC,MAAMC,OAAOC,IAAI,CACbP,MAAOA,EACPG,MAAOA,EACPC,YAAaA,EACbX,MAAOA,EACPD,IAAKA,IAETK,OAAOC,SAASC,KAAO","file":"uploadDoc.8d476907.js","sourceRoot":"..","sourcesContent":["var firebaseConfig = {\n    apiKey: \"AIzaSyAYC2xOKqPvMKbQWxXxiQHpW3HbbDdCou0\",\n    authDomain: \"introfirebase-e7ca2.firebaseapp.com\",\n    databaseURL: \"https://introfirebase-e7ca2.firebaseio.com\",\n    projectId: \"introfirebase-e7ca2\",\n    storageBucket: \"introfirebase-e7ca2.appspot.com\",\n    messagingSenderId: \"660691288615\",\n    appId: \"1:660691288615:web:3c97023e6eeab131560402\",\n    measurementId: \"G-S3377XEK4R\",\n};\n// Initialize Firebase\nfirebase.initializeApp(firebaseConfig);\nconst database = firebase.database();\nlet selectedFile;\n\n$(\"#file\").on(\"change\", function(event) {\n    selectedFile = event.target.files[0];\n});\n\nfunction uploadFile() {\n    // Create a root reference\n    let filename = selectedFile.name;\n    let storageRef = firebase.storage().ref(\"/trabajosBdT/\" + filename);\n\n    let uploadTask = storageRef.put(selectedFile);\n\n    // Observers:\n\n    uploadTask.on(\n        \"state_changed\",\n        function(snapshot) {\n            // Observe state change events such as progress, pause, and resume\n            // Get task progress, including the number of bytes uploaded and the total number of bytes to be uploaded\n            var progress =\n                (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n            console.log(\"Upload is \" + progress + \"% done\");\n            switch (snapshot.state) {\n                case firebase.storage.TaskState.PAUSED: // or 'paused'\n                    console.log(\"Upload is paused\");\n                    break;\n                case firebase.storage.TaskState.RUNNING: // or 'running'\n                    console.log(\"Upload is running\");\n                    break;\n            }\n        },\n        function(error) {\n            // Handle unsuccessful uploads\n        },\n        function() {\n            // Handle successful uploads on complete\n            // For instance, get the download URL: https://firebasestorage.googleapis.com/...\n            uploadTask.snapshot.ref\n                .getDownloadURL()\n                .then(function(downloadURL) {\n                    let url = downloadURL;\n                    // console.log(\"File available at\", downloadURL);\n                });\n        }\n    );\n}\n\n// Subir oferta\nconst btnUploadDoc = document.querySelector(\"#btnUploadDoc\");\nbtnUploadDoc.onclick = () => {\n    // let url = uploadFile();\n\n    // Create a root reference\n    let filename = selectedFile.name;\n    let storageRef = firebase.storage().ref(\"/trabajosBdT/\" + filename);\n\n    let uploadTask = storageRef.put(selectedFile);\n\n    // Observers:\n\n    uploadTask.on(\n        \"state_changed\",\n        function(snapshot) {\n            // Observe state change events such as progress, pause, and resume\n            // Get task progress, including the number of bytes uploaded and the total number of bytes to be uploaded\n            var progress =\n                (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n            console.log(\"Upload is \" + progress + \"% done\");\n            switch (snapshot.state) {\n                case firebase.storage.TaskState.PAUSED: // or 'paused'\n                    console.log(\"Upload is paused\");\n                    break;\n                case firebase.storage.TaskState.RUNNING: // or 'running'\n                    console.log(\"Upload is running\");\n                    break;\n            }\n        },\n        function(error) {\n            // Handle unsuccessful uploads\n        },\n        function() {\n            // Handle successful uploads on complete\n            // For instance, get the download URL: https://firebasestorage.googleapis.com/...\n            uploadTask.snapshot.ref\n                .getDownloadURL()\n                .then(function(downloadURL) {\n                    let url = downloadURL;\n                    console.log(\"URL\", url);\n\n                    //Enviar todo.\n                    // let email = document.getElementById(\"email\").value;\n                    let email = localStorage.getItem(\"email\");\n                    console.log(email);\n                    if ((email === ' ') || (email === null)) {\n                        alert(\"No ha iniciado sesión. Se le redirigirá a 'Iniciar Sesión'\");\n                        window.location.href = \"login.html\";\n                    } else {\n                        // let emailError = document.querySelector(\".email-error\");\n                        let title = document.getElementById(\"title_doc\").value;\n                        let hours = document.getElementById(\"hours\").value;\n                        let description = document.getElementById(\"textarea1\")\n                            .value;\n\n                        banco = database.ref(`ofertasBdT`);\n\n                        banco.push().set({\n                            title: title,\n                            hours: hours,\n                            description: description,\n                            email: email,\n                            url: url,\n                        });\n                        window.location.href = \"bancodetiempo.html\"\n                    }\n                    // console.log(\"File available at\", downloadURL);\n                });\n        }\n    );\n\n    // console.log(\"URL\", url);\n\n    // //Enviar todo.\n    // let email = document.getElementById(\"email\").value;\n    // // let emailError = document.querySelector(\".email-error\");\n    // let title = document.getElementById(\"title_doc\").value;\n    // let hours = document.getElementById(\"hours\").value;\n    // let description = document.getElementById(\"textarea1\").value;\n\n    // banco = database.ref(`ofertasBdT`);\n\n    // banco.push().set({\n    //     title: title,\n    //     hours: hours,\n    //     description: description,\n    //     email: email,\n    // });\n};"]}