{"version":3,"sources":["PrototipoWeb/js/uploadDoc.js"],"names":["firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","firebase","initializeApp","selectedFile","database","uploadFile","filename","name","uploadTask","storage","ref","put","on","snapshot","progress","bytesTransferred","totalBytes","console","log","state","TaskState","PAUSED","RUNNING","error","getDownloadURL","then","downloadURL","$","event","target","files","btnUploadDoc","document","querySelector","onclick","url","email","getElementById","value","title","hours","description","banco","push","set"],"mappings":";AAAA,IAAIA,EAAiB,CACjBC,OAAQ,0CACRC,WAAY,sCACZC,YAAa,6CACbC,UAAW,sBACXC,cAAe,kCACfC,kBAAmB,eACnBC,MAAO,4CACPC,cAAe,gBAGnBC,SAASC,cAAcV,GACvB,IACIW,EADEC,EAAWH,SAASG,WAO1B,SAASC,IAEDC,IAAAA,EAAWH,EAAaI,KAGxBC,EAFaP,SAASQ,UAAUC,IAAI,gBAAkBJ,GAE9BK,IAAIR,GAIhCK,EAAWI,GACP,gBACA,SAAUC,GAGFC,IAAAA,EACCD,EAASE,iBAAmBF,EAASG,WAAc,IAEhDH,OADRI,QAAQC,IAAI,aAAeJ,EAAW,UAC9BD,EAASM,OACRlB,KAAAA,SAASQ,QAAQW,UAAUC,OAC5BJ,QAAQC,IAAI,oBACZ,MACCjB,KAAAA,SAASQ,QAAQW,UAAUE,QAC5BL,QAAQC,IAAI,uBAIxB,SAAUK,KAGV,WAGIf,EAAWK,SAASH,IACfc,iBACAC,KAAK,SAAUC,QAtChCC,EAAE,SAASf,GAAG,SAAU,SAAUgB,GAC9BzB,EAAeyB,EAAMC,OAAOC,MAAM,KA8CtC,IAAMC,EAAeC,SAASC,cAAc,iBAC5CF,EAAaG,QAAU,WAIf5B,IAAAA,EAAWH,EAAaI,KAGxBC,EAFaP,SAASQ,UAAUC,IAAI,gBAAkBJ,GAE9BK,IAAIR,GAIhCK,EAAWI,GACP,gBACA,SAAUC,GAGFC,IAAAA,EACCD,EAASE,iBAAmBF,EAASG,WAAc,IAEhDH,OADRI,QAAQC,IAAI,aAAeJ,EAAW,UAC9BD,EAASM,OACRlB,KAAAA,SAASQ,QAAQW,UAAUC,OAC5BJ,QAAQC,IAAI,oBACZ,MACCjB,KAAAA,SAASQ,QAAQW,UAAUE,QAC5BL,QAAQC,IAAI,uBAIxB,SAAUK,KAGV,WAGIf,EAAWK,SAASH,IACfc,iBACAC,KAAK,SAAUC,GACRS,IAAAA,EAAMT,EACVT,QAAQC,IAAI,MAAOiB,GAGfC,IAAAA,EAAQJ,SAASK,eAAe,SAASC,MAEzCC,EAAQP,SAASK,eAAe,aAAaC,MAC7CE,EAAQR,SAASK,eAAe,SAASC,MACzCG,EAAcT,SAASK,eAAe,aACrCC,MAELI,MAAQtC,EAASM,IAAjB,cAEAgC,MAAMC,OAAOC,IAAI,CACbL,MAAOA,EACPC,MAAOA,EACPC,YAAaA,EACbL,MAAOA,EACPD,IAAKA","file":"uploadDoc.dc3142e3.js","sourceRoot":"..","sourcesContent":["var firebaseConfig = {\n    apiKey: \"AIzaSyAYC2xOKqPvMKbQWxXxiQHpW3HbbDdCou0\",\n    authDomain: \"introfirebase-e7ca2.firebaseapp.com\",\n    databaseURL: \"https://introfirebase-e7ca2.firebaseio.com\",\n    projectId: \"introfirebase-e7ca2\",\n    storageBucket: \"introfirebase-e7ca2.appspot.com\",\n    messagingSenderId: \"660691288615\",\n    appId: \"1:660691288615:web:3c97023e6eeab131560402\",\n    measurementId: \"G-S3377XEK4R\",\n};\n// Initialize Firebase\nfirebase.initializeApp(firebaseConfig);\nconst database = firebase.database();\nlet selectedFile;\n\n$(\"#file\").on(\"change\", function (event) {\n    selectedFile = event.target.files[0];\n});\n\nfunction uploadFile() {\n    // Create a root reference\n    let filename = selectedFile.name;\n    let storageRef = firebase.storage().ref(\"/trabajosBdT/\" + filename);\n\n    let uploadTask = storageRef.put(selectedFile);\n\n    // Observers:\n\n    uploadTask.on(\n        \"state_changed\",\n        function (snapshot) {\n            // Observe state change events such as progress, pause, and resume\n            // Get task progress, including the number of bytes uploaded and the total number of bytes to be uploaded\n            var progress =\n                (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n            console.log(\"Upload is \" + progress + \"% done\");\n            switch (snapshot.state) {\n                case firebase.storage.TaskState.PAUSED: // or 'paused'\n                    console.log(\"Upload is paused\");\n                    break;\n                case firebase.storage.TaskState.RUNNING: // or 'running'\n                    console.log(\"Upload is running\");\n                    break;\n            }\n        },\n        function (error) {\n            // Handle unsuccessful uploads\n        },\n        function () {\n            // Handle successful uploads on complete\n            // For instance, get the download URL: https://firebasestorage.googleapis.com/...\n            uploadTask.snapshot.ref\n                .getDownloadURL()\n                .then(function (downloadURL) {\n                    let url = downloadURL;\n                    // console.log(\"File available at\", downloadURL);\n                });\n        }\n    );\n}\n\n// Subir oferta\nconst btnUploadDoc = document.querySelector(\"#btnUploadDoc\");\nbtnUploadDoc.onclick = () => {\n    // let url = uploadFile();\n\n    // Create a root reference\n    let filename = selectedFile.name;\n    let storageRef = firebase.storage().ref(\"/trabajosBdT/\" + filename);\n\n    let uploadTask = storageRef.put(selectedFile);\n\n    // Observers:\n\n    uploadTask.on(\n        \"state_changed\",\n        function (snapshot) {\n            // Observe state change events such as progress, pause, and resume\n            // Get task progress, including the number of bytes uploaded and the total number of bytes to be uploaded\n            var progress =\n                (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n            console.log(\"Upload is \" + progress + \"% done\");\n            switch (snapshot.state) {\n                case firebase.storage.TaskState.PAUSED: // or 'paused'\n                    console.log(\"Upload is paused\");\n                    break;\n                case firebase.storage.TaskState.RUNNING: // or 'running'\n                    console.log(\"Upload is running\");\n                    break;\n            }\n        },\n        function (error) {\n            // Handle unsuccessful uploads\n        },\n        function () {\n            // Handle successful uploads on complete\n            // For instance, get the download URL: https://firebasestorage.googleapis.com/...\n            uploadTask.snapshot.ref\n                .getDownloadURL()\n                .then(function (downloadURL) {\n                    let url = downloadURL;\n                    console.log(\"URL\", url);\n\n                    //Enviar todo.\n                    let email = document.getElementById(\"email\").value;\n                    // let emailError = document.querySelector(\".email-error\");\n                    let title = document.getElementById(\"title_doc\").value;\n                    let hours = document.getElementById(\"hours\").value;\n                    let description = document.getElementById(\"textarea1\")\n                        .value;\n\n                    banco = database.ref(`ofertasBdT`);\n\n                    banco.push().set({\n                        title: title,\n                        hours: hours,\n                        description: description,\n                        email: email,\n                        url: url,\n                    });\n                    // console.log(\"File available at\", downloadURL);\n                });\n        }\n    );\n\n    // console.log(\"URL\", url);\n\n    // //Enviar todo.\n    // let email = document.getElementById(\"email\").value;\n    // // let emailError = document.querySelector(\".email-error\");\n    // let title = document.getElementById(\"title_doc\").value;\n    // let hours = document.getElementById(\"hours\").value;\n    // let description = document.getElementById(\"textarea1\").value;\n\n    // banco = database.ref(`ofertasBdT`);\n\n    // banco.push().set({\n    //     title: title,\n    //     hours: hours,\n    //     description: description,\n    //     email: email,\n    // });\n};\n"]}